<!-- /snippets/collection-product.liquid -->

              {% assign on_sale = false %}
              {% if product.compare_at_price > product.price %}
                {% assign on_sale = true %}
              {% endif %}
              {% assign sold_out = true %}
              {% if product.available %}
                {% assign sold_out = false %}
              {% endif %}

              <a href="{{ product.url | within: collection }}" class="grid__image">
                <img src="{{ product.featured_image.src | img_url: '1024x1024' }}" alt="{{ product.featured_image.alt | escape }}">
              </a>

            </div>
            <div class="grid__item {% if grid_width %}{{ grid_width }}{% else %}large--two-thirds{% endif %} flex__item{% cycle '', ' large--text-right' %}">
              <div class="mini-wrapper">
                <h2>
                  <a href="{{ product.url | within: collection }}">{{ product.title }}</a>
                </h2>

                {% assign content = product.description %}
                {% assign splits = content | split: '[split]' %}
                {% capture description %}{% endcapture %}
                {% for split in splits %}
                  {% if split contains '[collection_description]' and split contains '[/collection_description]'  %}
                    {% capture description %}{{ split | remove: '[collection_description]' | remove: '[/collection_description]' | strip_html | newline_to_br }}{% endcapture %}
                  {% endif %}
                {% endfor %}
                <p>{{ description }} <b><a href="{{ product.url | within: collection }}" title="{{ product.title }}">More Info</a></b></p>

                <p class="price">
                  {% if on_sale %}
                    {% if product.price_varies %}
                      {% assign sale_price = product.price | money %}
                      {{ 'products.product.on_sale_from_html' | t: price: sale_price }}
                    {% else %}
                      <strong>{{ 'products.product.on_sale' | t }}</strong>
                      {{ product.price | money }}
                    {% endif %}
                  {% else %}
                    {% if product.price_varies %}
                      {% assign price = product.price | money %}
                      {{ 'products.general.from_text_html' | t: price: price }}
                    {% else %}
                      {{ product.price | money }}
                    {% endif %}
                  {% endif %}
                  {% if sold_out %}
                    <br><strong>{{ 'products.product.sold_out' | t }}</strong>
                  {% endif %}
                  {% if on_sale %}
                    <span class="visually-hidden">{{ 'products.general.regular_price' | t }}</span>
                    <br><s>{{ product.compare_at_price | money }}</s>
                  {% endif %}
                </p>
                <form action="/cart/add" method="post" enctype="multipart/form-data" id="AddToCartForm" class="form-vertical">
                  <select name="id" id="productSelect" class="product-single__variants{% if product.variants.size == 1 %} visually-hidden{% endif %}">
                    {% for variant in product.variants %}
                      {% if variant.available %}
                        <option {% if variant == product.selected_or_first_available_variant %} selected="selected" {% endif %} data-sku="{{ variant.sku }}" value="{{ variant.id }}">{{ variant.title }} - {{ variant.price | money_with_currency }}</option>
                      {% else %}
                        <option disabled="disabled">
                          {{ variant.title }} - {{ 'products.product.sold_out' | t }}
                        </option>
                      {% endif %}
                    {% endfor %}
                  </select>
                  <button type="submit" name="add" id="AddToCart" class="btn btn--large">
                    <span id="AddToCartText">{{ 'products.product.add_to_cart' | t }}</span>
                  </button>
                </form>
              </div>
