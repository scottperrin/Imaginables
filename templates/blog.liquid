<!-- /templates/blog.liquid -->

{% paginate blog.articles by 6 %}

{% if current_tags %}
  <h1>{{ blog.title | link_to: blog.url }} &mdash; {{ current_tags.first }}</h1>
{% else %}
  <h1>{{ blog.title }}</h1>
{% endif %}

<div class="grid">

  <div class="grid__item large--two-thirds">

    {% for article in blog.articles | limit:1 %}

      {% assign size = '_2048x2048' %}
      {% include 'blog-image' %}

      <h2><a href="{{ article.url }}">{{ article.title }}</a></h2>
      {% comment %}{% capture author %}<strong>{{ article.author }}</strong>{% endcapture %}
      {% capture date %}<time datetime="{{ article.published_at | date: '%Y-%m-%d' }}">{{ article.published_at | date: format: 'month_day_year' }}</time>{% endcapture %}
      <p>{{ 'blogs.article.author_on_date_html' | t: author: author, date: date }}</p>{% endcomment %}
      <span class="date"><time datetime="{{ article.published_at | date: '%Y-%m-%d' }}">{{ article.published_at | date: format: 'month_day_year' }}</time></span>

      <div class="rte">
        {% if article.excerpt.size > 0 %}
          {{ article.excerpt }}
        {% else %}
          <p>{{ article.content | strip_html | truncatewords: 70 }}</p>
        {% endif %}
      </div>

      <a href="{{ article.url }}" class="btn">{{ 'blogs.article.read_more' | t }}</a>

      <hr>

    {% endfor %}

    <div class="grid-uniform">

      {% for article in blog.articles | limit:2 | offset:1 %}

        <div class="grid__item large--one-half">
          <div class="article">

            {% assign size = '_grande' %}
            {% include 'blog-image' %}

            <h3><a href="{{ article.url }}">{{ article.title }}</a></h3>
            {% comment %}{% capture author %}<strong>{{ article.author }}</strong>{% endcapture %}
            {% capture date %}<time datetime="{{ article.published_at | date: '%Y-%m-%d' }}">{{ article.published_at | date: format: 'month_day_year' }}</time>{% endcapture %}
            <p>{{ 'blogs.article.author_on_date_html' | t: author: author, date: date }}</p>{% endcomment %}
            <span class="date"><time datetime="{{ article.published_at | date: '%Y-%m-%d' }}">{{ article.published_at | date: format: 'month_day_year' }}</time></span>

            <div class="rte">
              {% if article.excerpt.size > 0 %}
                {{ article.excerpt }}
              {% else %}
                <p>{{ article.content | strip_html | truncatewords: 50 }}</p>
              {% endif %}
            </div>

            <a href="{{ article.url }}" class="btn">{{ 'blogs.article.read_more' | t }}</a>

          </div>
        </div>

      {% endfor %}

    </div>

    <hr>

    <div class="grid-uniform">

      {% for article in blog.articles | limit:3 | offset:3 %}

        <div class="grid__item large--one-third">
          <div class="article">

            {% assign size = '_grande' %}
            {% include 'blog-image' %}

            <h4><a href="{{ article.url }}">{{ article.title }}</a></h4>
            {% comment %}{% capture author %}<strong>{{ article.author }}</strong>{% endcapture %}
            {% capture date %}<time datetime="{{ article.published_at | date: '%Y-%m-%d' }}">{{ article.published_at | date: format: 'month_day_year' }}</time>{% endcapture %}
            <p>{{ 'blogs.article.author_on_date_html' | t: author: author, date: date }}</p>{% endcomment %}
            <span class="date"><time datetime="{{ article.published_at | date: '%Y-%m-%d' }}">{{ article.published_at | date: format: 'month_day_year' }}</time></span>

            <div class="rte">
              {% if article.excerpt.size > 0 %}
                {{ article.excerpt }}
              {% else %}
                <p>{{ article.content | strip_html | truncatewords: 30 }}</p>
              {% endif %}
            </div>

            <a href="{{ article.url }}" class="btn">{{ 'blogs.article.read_more' | t }}</a>

          </div>
        </div>

      {% endfor %}

    </div>

    <hr>

    <div class="grid-uniform">
      {% for article in blog.articles | limit:6 | offset:6 %}
        <div class="grid__item large--one-half">
          <div class="article">
            <h4><a href="{{ article.url }}">{{ article.title }}</a></h4>
            {% comment %}{% capture author %}<strong>{{ article.author }}</strong>{% endcapture %}
            {% capture date %}<time datetime="{{ article.published_at | date: '%Y-%m-%d' }}">{{ article.published_at | date: format: 'month_day_year' }}</time>{% endcapture %}
            <p>{{ 'blogs.article.author_on_date_html' | t: author: author, date: date }}</p>{% endcomment %}
            <span class="date"><time datetime="{{ article.published_at | date: '%Y-%m-%d' }}">{{ article.published_at | date: format: 'month_day_year' }}</time></span>
          </div>
        </div>
      {% endfor %}
    </div>

    {% include 'breadcrumb' %}

  </div>

  <aside class="grid__item large--one-third medium-down--hide" role="complementary">
    {% include 'blog-sidebar' %}
  </aside>

</div>

</div>

{% include 'pagination' %}

{% endpaginate %}
